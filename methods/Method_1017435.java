/** 
 * ???? <p> ??????,???????????,?????????????,??,????????????????????????????, ??????????????????,??,????????????????????? </p>
 * @param tuple ????
 * @param filter ????
 * @return ?????????????ID,???????????ID???????????????????,??????????????
 * @throws WeixinException
 * @see Tag
 * @see com.foxinmy.weixin4j.tuple.Text
 * @see com.foxinmy.weixin4j.tuple.Image
 * @see com.foxinmy.weixin4j.tuple.Voice
 * @see com.foxinmy.weixin4j.tuple.MpVideo
 * @see com.foxinmy.weixin4j.tuple.MpNews
 * @see com.foxinmy.weixin4j.tuple.Card
 * @see com.foxinmy.weixin4j.tuple.MassTuple
 */
private String[] mass(MassTuple tuple,JSONObject filter) throws WeixinException {
  if (tuple instanceof MpNews) {
    MpNews _news=(MpNews)tuple;
    List<MpArticle> _articles=_news.getArticles();
    if (StringUtil.isBlank(_news.getMediaId())) {
      if (_articles.isEmpty()) {
        throw new WeixinException("mass fail:mediaId or articles is required");
      }
      tuple=new MpNews(uploadArticle(_articles));
    }
    if (!filter.containsKey("send_ignore_reprint")) {
      filter.put("send_ignore_reprint",0);
    }
  }
  String msgtype=tuple.getMessageType();
  JSONObject obj=new JSONObject();
  obj.putAll(filter);
  obj.put(msgtype,JSON.toJSON(tuple));
  obj.put("msgtype",msgtype);
  String mass_group_uri=getRequestUri("mass_group_uri");
  Token token=tokenManager.getCache();
  WeixinResponse response=weixinExecutor.post(String.format(mass_group_uri,token.getAccessToken()),obj.toJSONString());
  obj=response.getAsJson();
  return new String[]{obj.getString("msg_id"),obj.getString("msg_data_id")};
}
