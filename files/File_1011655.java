package jetbrains.mps.console.actions;

/*Generated by MPS */

import java.util.Map;
import org.jetbrains.mps.openapi.model.SNode;
import java.util.WeakHashMap;
import jetbrains.mps.internal.collections.runtime.MapSequence;

public class ClosureHoldingNodeUtil {

  private static ClosureHoldingNodeUtil myInstance;

  private Map<SNode, Runnable> allActions;

  private ClosureHoldingNodeUtil() {
    allActions = new WeakHashMap<SNode, Runnable>();
  }

  public static ClosureHoldingNodeUtil getInstance() {
    if (myInstance == null) {
      myInstance = new ClosureHoldingNodeUtil();
    }
    return myInstance;
  }

  public void register(SNode node, Runnable closure) {
    MapSequence.fromMap(allActions).put(node, closure);
  }

  public Runnable getClosure(SNode node) {
    return MapSequence.fromMap(allActions).get(node);
  }

  public void executeClosure(SNode node) {
    getClosure(node).run();
  }
}
